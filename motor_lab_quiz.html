<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Juncheng Wu Â· Motor Learning Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --card: #020617;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.12);
      --accent-strong: rgba(34, 197, 94, 0.7);
      --border-subtle: rgba(148, 163, 184, 0.3);
      --border-strong: rgba(148, 163, 184, 0.6);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --error: #f97373;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", Roboto, sans-serif;
      background:
        radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.15), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(34, 197, 94, 0.2), transparent 55%),
        var(--bg);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .shell {
      max-width: 1024px;
      margin: 24px auto 40px;
      padding: 0 16px;
    }

    header.lab-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 18px;
    }

    .lab-title {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.03em;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .lab-dot {
      width: 11px;
      height: 11px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 18px rgba(34, 197, 94, 0.95);
    }

    .lab-subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid var(--border-strong);
      color: var(--text-muted);
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(18px);
    }

    section.card {
      background: rgba(15, 23, 42, 0.88);
      border-radius: 22px;
      border: 1px solid var(--border-subtle);
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.7);
      padding: 22px 22px 20px;
      transition: opacity 0.35s ease, transform 0.35s ease;
    }

    .hidden {
      display: none;
    }

    .fade-in {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .fade-out {
      opacity: 0;
      transform: translateY(12px) scale(0.99);
      pointer-events: none;
    }

    .login-inner {
      max-width: 420px;
      margin: 32px auto 12px;
      text-align: center;
    }

    .login-title {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .login-desc {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 18px;
    }

    .input-wrap {
      text-align: left;
      margin-bottom: 12px;
    }

    .input-label {
      font-size: 13px;
      margin-bottom: 6px;
      color: var(--text-muted);
    }

    .input-field {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 14px;
      outline: none;
      transition: border 0.2s ease, box-shadow 0.2s ease, background 0.2s;
    }

    .input-field:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px var(--accent-soft);
      background: #020617;
    }

    .error-text {
      min-height: 18px;
      font-size: 12px;
      color: var(--error);
      margin-top: 4px;
    }

    .login-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-muted);
    }

    button {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 14px;
      background: #111827;
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.18s ease;
    }

    button.primary {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #011;
      font-weight: 600;
      box-shadow: 0 16px 30px rgba(34, 197, 94, 0.32);
    }

    button.primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 20px 40px rgba(34, 197, 94, 0.42);
    }

    button.secondary {
      background: rgba(15, 23, 42, 0.9);
    }

    button.secondary:hover {
      background: #020617;
    }

    .quiz-header-line {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .quiz-header-line strong {
      color: var(--text-main);
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      font-size: 11px;
      color: var(--text-muted);
    }

    .question-shell {
      position: relative;
    }

    .question-card {
      background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.18), transparent 60%),
                  var(--card);
      border-radius: 18px;
      padding: 14px 14px 12px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      transition: border 0.2s ease, background 0.2s ease, transform 0.16s ease,
                  opacity 0.28s ease, transform 0.28s ease;
      opacity: 1;
      transform: translateX(0);
    }

    .question-card.correct {
      border-color: var(--accent-strong);
      background: radial-gradient(circle at top left, rgba(34, 197, 94, 0.28), transparent 60%),
                  #022c22;
    }

    .question-card.incorrect {
      border-color: rgba(248, 113, 113, 0.9);
      background: radial-gradient(circle at top left, rgba(248, 113, 113, 0.18), transparent 60%),
                  #1f2933;
    }

    .slide-out {
      opacity: 0;
      transform: translateX(-18px);
    }

    .slide-in {
      opacity: 1;
      transform: translateX(0);
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .question-index {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
    }

    .question-type {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      text-transform: uppercase;
    }

    .type-tf {
      background: rgba(59, 130, 246, 0.12);
      color: #93c5fd;
    }

    .type-mc {
      background: rgba(249, 115, 22, 0.12);
      color: #fed7aa;
    }

    .question-text {
      font-size: 15px;
      line-height: 1.5;
      margin-bottom: 8px;
    }

    .options {
      display: grid;
      gap: 4px;
      margin-bottom: 6px;
    }

    label.option {
      display: flex;
      align-items: flex-start;
      gap: 6px;
      cursor: pointer;
      padding: 4px 6px;
      border-radius: 8px;
      transition: background 0.15s ease;
      font-size: 14px;
    }

    label.option:hover {
      background: rgba(31, 41, 55, 0.92);
    }

    input[type="radio"] {
      margin-top: 3px;
      accent-color: var(--accent);
    }

    .mini-feedback {
      font-size: 12px;
      margin-top: 4px;
      color: var(--text-muted);
    }

    .mini-feedback.correct {
      color: #4ade80;
    }

    .mini-feedback.incorrect {
      color: #fca5a5;
    }

    .quiz-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .time-pill {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      font-size: 11px;
    }

    .result-main {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .result-topline {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      font-size: 14px;
    }

    .score-pill {
      padding: 4px 12px;
      border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid var(--accent-strong);
      color: #bbf7d0;
      font-weight: 600;
    }

    .comment-pill {
      padding: 4px 12px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.18);
      border: 1px solid var(--border-strong);
      color: var(--text-main);
    }

    .result-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .time-list {
      margin-top: 6px;
      padding-top: 8px;
      border-top: 1px dashed rgba(75, 85, 99, 0.9);
      font-size: 12px;
      color: var(--text-muted);
      max-height: 200px;
      overflow-y: auto;
    }

    .time-list-item {
      margin-bottom: 2px;
    }

    .review-list {
      margin-top: 10px;
      max-height: 380px;
      overflow-y: auto;
    }

    .review-card {
      background: radial-gradient(circle at top left, rgba(248, 113, 113, 0.2), transparent 60%),
                  #111827;
      border-radius: 16px;
      border: 1px solid rgba(248, 113, 113, 0.9);
      padding: 10px 12px;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .review-card strong {
      color: #fecaca;
    }

    @media (max-width: 700px) {
      .shell {
        margin-top: 16px;
      }
      header.lab-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
      }
      .lab-title {
        font-size: 18px;
      }
      section.card {
        padding: 18px 14px 16px;
        border-radius: 18px;
      }
      .quiz-footer {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <header class="lab-header">
      <div>
        <div class="lab-title">
          <span class="lab-dot"></span>
          Juncheng Wu Â· Motor Learning Lab
        </div>
        <div class="lab-subtitle">
          è¿åŠ¨å­¦ä¹ ä¸æ§åˆ¶ Â· åœ¨çº¿è‡ªæµ‹ç³»ç»Ÿ
        </div>
      </div>
      <div class="pill">Made with ChatGPT Â· æ¯” Gemini æ›´ä¸æ»‘ğŸ˜</div>
    </header>

    <!-- ç™»å½• -->
    <section id="login-screen" class="card fade-in">
      <div class="login-inner">
        <div class="login-title">è¾“å…¥å­¦å·è¿›è¡Œæµ‹è¯•é¡µé¢</div>
        <div class="login-desc">
          æœ¬æµ‹è¯•ä»…ä¾›æŒ‡å®šå­¦ç”Ÿè‡ªæµ‹ä½¿ç”¨ã€‚<br />
          è¯·è¾“å…¥ä½ çš„çœŸå®å­¦å·åå¼€å§‹ä½œç­”ã€‚
        </div>

        <div class="input-wrap">
          <div class="input-label">å­¦å· Student ID</div>
          <input
            id="student-id"
            class="input-field"
            placeholder="ä¾‹å¦‚ï¼š2201XXXX"
            autocomplete="off"
          />
          <div id="login-error" class="error-text"></div>
        </div>

        <div class="login-footer">
          <span>æœ¬æµ‹è¯•ç³»ç»Ÿä»…å…è®¸ä½¿ç”¨çœŸå®å­¦å·ã€‚</span>
          <button id="login-btn" class="primary">è¿›å…¥æµ‹è¯•</button>
        </div>
      </div>
    </section>

    <!-- ç­”é¢˜é¡µé¢ï¼šæ¯æ¬¡åªæ˜¾ç¤ºä¸€é¢˜ -->
    <section id="quiz-screen" class="card hidden">
      <div class="quiz-header-line">
        <div>
          <span id="progress-text"></span> Â·
          å½“å‰é¢˜ç”¨æ—¶ï¼š<span id="current-time">0.0s</span>
        </div>
        <div class="chip" id="user-id-chip"></div>
      </div>

      <div class="question-shell">
        <div id="question-card" class="question-card"></div>
      </div>

      <div class="quiz-footer">
        <div class="time-pill">
          æ€»é¢˜æ•°ï¼š<span id="total-count">0</span>ï¼›
          åˆ¤æ–­é¢˜ï¼š<span id="tf-count">0</span>ï¼›
          å•é€‰é¢˜ï¼š<span id="mc-count">0</span>
        </div>
        <button id="next-btn" class="primary" disabled>ä¸‹ä¸€é¢˜</button>
      </div>
    </section>

    <!-- æˆç»©é¡µé¢ -->
    <section id="result-screen" class="card hidden">
      <div class="result-main">
        <div class="result-topline">
          <div id="score-pill" class="score-pill"></div>
          <div id="comment-pill" class="comment-pill"></div>
        </div>
        <div style="font-size:12px;color:var(--text-muted);margin-top:2px;">
          å­¦å·ï¼š<span id="result-id"></span> Â·
          æ€»ç”¨æ—¶ï¼š<span id="total-time"></span>
        </div>

        <div class="result-actions">
          <button id="review-btn" class="secondary">é”™é¢˜é€Ÿè§ˆ</button>
          <button id="export-btn" class="secondary">å¯¼å‡ºæˆç»©å•</button>
          <button id="restart-btn" class="secondary">é‡æ–°æµ‹è¯•</button>
        </div>

        <div class="time-list">
          <div style="margin-bottom:4px;">æ¯é¢˜ç”¨æ—¶ï¼ˆç§’ï¼‰ï¼š</div>
          <div id="time-list"></div>
        </div>
      </div>
    </section>

    <!-- é”™é¢˜é¡µé¢ -->
    <section id="review-screen" class="card hidden">
      <div style="font-size:15px;font-weight:600;margin-bottom:6px;">
        é”™é¢˜é€Ÿè§ˆ
      </div>
      <div style="font-size:12px;color:var(--text-muted);margin-bottom:6px;">
        ä»…å±•ç¤ºæœ¬æ¬¡ä½œç­”ä¸­å›ç­”é”™è¯¯æˆ–æœªä½œç­”çš„é¢˜ç›®ï¼Œä¾¿äºé’ˆå¯¹æ€§å¤ä¹ ã€‚
      </div>
      <div id="review-list" class="review-list"></div>
      <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap;">
        <button id="back-to-result" class="secondary">è¿”å›æˆç»©é¡µé¢</button>
        <button id="back-to-start" class="secondary">å›åˆ°é¦–é¡µ</button>
      </div>
    </section>
  </div>

  <script>
    // ---------- é¢˜åº“ï¼šä¸ä¸Šä¸€ç‰ˆç›¸åŒ 40 é¢˜ ----------
    const questions = [
      // åˆ¤æ–­é¢˜ 1-20
      {
        id: "Q1",
        type: "tf",
        text: "é›¶è¿ç§»ä¸ä»£è¡¨æ²¡æœ‰è¿ç§»å‘ç”Ÿï¼Œåªæ˜¯è¯„ä»·æ–¹æ³•ä¸­æœªè¢«å¯Ÿè§‰ï¼Œæˆ–æ­£è´Ÿè¿ç§»äº’ç›¸æŠµæ¶ˆã€‚",
        correct: "A",
        explanation: "é›¶è¿ç§»å¯èƒ½è¢«ç›¸äº’æŠµæ¶ˆæˆ–æµ‹é‡ä¸åˆ°ï¼Œä¸ç­‰äºå®Œå…¨æ²¡æœ‰è¿ç§»ã€‚"
      },
      {
        id: "Q2",
        type: "tf",
        text: "æ­£è¿ç§»æ˜¯å­¦ä¹ è€…æœ€æ„¿è§åˆ°çš„ä¸€ç§è¿ç§»å½¢å¼ã€‚",
        correct: "A",
        explanation: "æ­£è¿ç§»èƒ½è®©æ—§ç»éªŒå¸®åŠ©æ–°æŠ€èƒ½ï¼Œæ˜¯æœ€ç†æƒ³çš„æƒ…å†µã€‚"
      },
      {
        id: "Q3",
        type: "tf",
        text: "è¶³çƒå®ˆé—¨å‘˜çš„æ‰‘æ•‘åŠ¨ä½œå±äºé—­åˆç¯è·¯æ§åˆ¶ã€‚",
        correct: "A",
        explanation: "æ‰‘æ•‘ä¾èµ–è§†è§‰ç­‰åé¦ˆå®æ—¶ä¿®æ­£åŠ¨ä½œï¼Œå±äºé—­ç¯æ§åˆ¶ã€‚"
      },
      {
        id: "Q4",
        type: "tf",
        text: "åœ¨å­¦ä¹ åˆæœŸï¼Œåº”é¢‘ç¹åœ°æä¾›è¿½åŠ åé¦ˆä»¥å¸®åŠ©å½¢æˆåŸºæœ¬è¿åŠ¨æ¨¡å¼ã€‚",
        correct: "A",
        explanation: "åˆå­¦é˜¶æ®µå†…éƒ¨åé¦ˆå¼±ï¼Œé«˜é¢‘è¿½åŠ åé¦ˆæœ‰åŠ©äºå»ºç«‹æ­£ç¡®åŠ¨ä½œã€‚"
      },
      {
        id: "Q5",
        type: "tf",
        text: "ä»åˆºæ¿€ä¿¡å·å‡ºç°åˆ°åŠ¨ä½œç»“æŸçš„æ—¶é—´ç§°ä¸ºååº”æ—¶é—´ã€‚",
        correct: "B",
        explanation: "è¿™æ®µå«åº”ç­”æ—¶é—´ï¼Œååº”æ—¶é—´åªåˆ°åŠ¨ä½œå¼€å§‹ä¸ºæ­¢ã€‚"
      },
      {
        id: "Q6",
        type: "tf",
        text: "å¸¦å®½åé¦ˆã€å°ç»“åé¦ˆã€å¹³å‡åé¦ˆã€è‡ªæˆ‘æ§åˆ¶åé¦ˆéƒ½èƒ½æœ‰æ•ˆé™ä½åé¦ˆé¢‘ç‡ã€‚",
        correct: "A",
        explanation: "è¿™å››ç§ç­–ç•¥æœ¬è´¨éƒ½æ˜¯â€œå°‘è€Œç²¾â€çš„åé¦ˆè®¾è®¡ã€‚"
      },
      {
        id: "Q7",
        type: "tf",
        text: "å°ç­æˆè¯¾ä¸­åº”é¿å…åé¦ˆé¢‘ç‡è¶…è¿‡ 50%ï¼Œ ä»¥å…äº§ç”Ÿä¾èµ–ä½œç”¨ã€‚",
        correct: "A",
        explanation: "åé¦ˆè¿‡åŠå®¹æ˜“è®©å­¦ç”Ÿè¿‡åº¦ä¾èµ–å¤–éƒ¨ä¿¡æ¯ã€‚"
      },
      {
        id: "Q8",
        type: "tf",
        text: "æš‚åœå’Œä¼‘æ¯æ—¶é—´é•¿äºç»ƒä¹ æ—¶é—´çš„ç»ƒä¹ å±äºé›†ä¸­ç»ƒä¹ ã€‚",
        correct: "B",
        explanation: "è¿™æ˜¯åˆ†æ•£ç»ƒä¹ ï¼Œé›†ä¸­ç»ƒä¹ æ˜¯ä¼‘æ¯æ—¶é—´çŸ­äºæˆ–ç­‰äºç»ƒä¹ æ—¶é—´ã€‚"
      },
      {
        id: "Q9",
        type: "tf",
        text: "éšç€ç»ƒä¹ ï¼Œè¿åŠ¨æŠ€èƒ½çš„åè°ƒæ€§å¢å¼ºã€å‚ä¸è‚Œç¾¤é‡ç»„ä¼˜åŒ–ï¼Œæ˜¯å­¦ä¹ çš„é‡è¦ç‰¹å¾ã€‚",
        correct: "A",
        explanation: "å­¦ä¹ ä¸ä»…å¿«ï¼Œè¿˜ä½“ç°åœ¨åŠ¨ä½œæ›´åè°ƒã€ç”¨è‚Œæ›´åˆç†ã€‚"
      },
      {
        id: "Q10",
        type: "tf",
        text: "æŠ€èƒ½åŠ¨ä½œç®€å•ã€å…ƒç´ å°‘ã€ç›¸å…³åº¦é«˜æ—¶ï¼Œåº”é‡‡ç”¨æ•´ä½“ç»ƒä¹ ã€‚",
        correct: "A",
        explanation: "æ•´ä½“ç»ƒä¹ é€‚åˆç®€å•ä¸”ç»“æ„ç´§å¯†çš„æŠ€èƒ½ã€‚"
      },
      {
        id: "Q11",
        type: "tf",
        text: "è§†è§‰æµèƒ½æä¾›ç¨³å®šæ€§ã€å¹³è¡¡ã€ç¯å¢ƒè¿åŠ¨é€Ÿåº¦ç­‰åŠ¨ä½œä¿¡æ¯ã€‚",
        correct: "A",
        explanation: "è§†è§‰æµåæ˜ è‡ªæˆ‘ä¸ç¯å¢ƒçš„ç›¸å¯¹è¿åŠ¨ï¼Œæ˜¯å§¿æ€ä¸å¹³è¡¡çš„é‡è¦çº¿ç´¢ã€‚"
      },
      {
        id: "Q12",
        type: "tf",
        text: "è‡ªåŠ¨åŒ–é˜¶æ®µåº”æå‡ç»ƒä¹ è€…æˆ˜æœ¯æ„è¯†å’Œæˆ˜ç•¥æ€ç»´èƒ½åŠ›ã€‚",
        correct: "A",
        explanation: "æŠ€æœ¯å·²åŸºæœ¬è‡ªåŠ¨åŒ–ï¼Œæ­¤æ—¶é‡ç‚¹æ˜¯æˆ˜æœ¯ä¸å†³ç­–ã€‚"
      },
      {
        id: "Q13",
        type: "tf",
        text: "æ ¹æ®è²èŒ¨å®šå¾‹ï¼Œç›®æ ‡å¤§å°å›ºå®šæ—¶ï¼ŒåŠ¨ä½œå¹…åº¦è¶Šå¤§ï¼ŒåŠ¨ä½œæ—¶é—´å¢åŠ è¶Šæ˜æ˜¾ã€‚",
        correct: "B",
        explanation: "éš¾åº¦ç”±è·ç¦»å’Œç›®æ ‡å¤§å°å…±åŒå†³å®šï¼Œè¿™ä¸ªè¯´æ³•ä¸ä¸¥è°¨ã€‚"
      },
      {
        id: "Q14",
        type: "tf",
        text: "è®¤çŸ¥å†³ç­–å…·æœ‰çº¿ç´¢å¤šã€é€Ÿåº¦å¿«ã€æ—¶é—´å……è¶³çš„ç‰¹ç‚¹ã€‚",
        correct: "A",
        explanation: "è®¤çŸ¥å†³ç­–ä¾é ä¸°å¯Œçº¿ç´¢å’Œåˆ†æï¼Œå¾€å¾€æœ‰è¾ƒå……è£•æ—¶é—´ã€‚"
      },
      {
        id: "Q15",
        type: "tf",
        text: "åŒæ­¥è¿½åŠ åé¦ˆå®¹æ˜“é€ æˆä¿¡æ¯è¶…è½½ã€‚",
        correct: "A",
        explanation: "è¾¹åšè¾¹è®²ä¸€å †å¾ˆå®¹æ˜“è®©å­¦ä¹ è€…å¤§è„‘çˆ†æ»¡ã€‚"
      },
      {
        id: "Q16",
        type: "tf",
        text: "åŠ¨ä½œå­¦ä¹ åŒ…æ‹¬è®¤çŸ¥é˜¶æ®µã€è”ç»“é˜¶æ®µã€è‡ªåŠ¨åŒ–é˜¶æ®µã€‚",
        correct: "A",
        explanation: "è¿™æ˜¯ç»å…¸çš„ä¸‰é˜¶æ®µåˆ’åˆ†ã€‚"
      },
      {
        id: "Q17",
        type: "tf",
        text: "è§‚å¯Ÿç¤ºèŒƒèƒ½è®©ç»ƒä¹ è€…è·å¾—åŠ¨ä½œçš„æ—¶é—´ä¿¡æ¯ã€ç©ºé—´ä¿¡æ¯å’Œåè°ƒæ¨¡å¼ã€‚",
        correct: "A",
        explanation: "ç¤ºèŒƒæä¾›äº†â€œåŠ¨ä½œé•¿ä»€ä¹ˆæ ·ã€æ€ä¹ˆè¿â€çš„ç›´è§‚æ¨¡æ¿ã€‚"
      },
      {
        id: "Q18",
        type: "tf",
        text: "è¿ç»­æ€§æŠ€èƒ½ä¸å¦æ ¹æ®åŠ¨ä½œæ˜¯å¦æœ‰æ˜æ˜¾å¼€å§‹ä¸ç»“æŸè¿›è¡ŒåŒºåˆ†ã€‚",
        correct: "A",
        explanation: "è¿ç»­æ€§æŠ€èƒ½æ²¡æœ‰æ¸…æ™°çš„èµ·æ­¢ç•Œé™ã€‚"
      },
      {
        id: "Q19",
        type: "tf",
        text: "éšæœºç»ƒä¹ æ˜¯å°†å¤šç§æ´»åŠ¨ä¾å›ºå®šé¡ºåºè¿›è¡Œç»ƒä¹ ï¼Œç›´åˆ°å…¨éƒ¨å®Œæˆã€‚",
        correct: "B",
        explanation: "å›ºå®šé¡ºåºå«ç¾¤ç»„/åºåˆ—ç»ƒä¹ ï¼Œéšæœºç»ƒä¹ é¡ºåºæ˜¯æ‰“ä¹±çš„ã€‚"
      },
      {
        id: "Q20",
        type: "tf",
        text: "è¿ç»­æ€§è¿åŠ¨æŠ€èƒ½å¯ä»¥éšæ—¶åˆ©ç”¨æ„Ÿå®˜ä¿¡æ¯å’Œåé¦ˆè¿›è¡ŒåŠ¨ä½œä¿®æ­£ã€‚",
        correct: "A",
        explanation: "è¿ç»­æ€§æŠ€èƒ½å¤šä¸ºé—­ç¯æ§åˆ¶ï¼Œå¯ä»¥è¾¹åšè¾¹ä¿®æ­£ã€‚"
      },
      // å•é€‰é¢˜ 21-40
      {
        id: "Q21",
        type: "mc",
        text: "æ ¹æ®ç¯å¢ƒçš„ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§ï¼Œè¿åŠ¨æŠ€èƒ½å¯åˆ†ä¸ºï¼š",
        options: ["å¤§å°è‚Œç¾¤æŠ€èƒ½", "å¼€æ”¾å¼ä¸é—­é”å¼æŠ€èƒ½", "ç¦»æ•£ä¸è¿ç»­æŠ€èƒ½", "ç®€å•ä¸å¤æ‚æŠ€èƒ½"],
        correct: "B",
        explanation: "æ˜¯å¦å—ç¯å¢ƒå˜åŒ–å½±å“ï¼Œæ˜¯å¼€æ”¾å¼/é—­é”å¼åˆ’åˆ†çš„ä¾æ®ã€‚"
      },
      {
        id: "Q22",
        type: "mc",
        text: "è‡ªæˆ‘æ§åˆ¶åé¦ˆæ˜¯æŒ‡ï¼š",
        options: [
          "æ•™ç»ƒå†³å®šæ˜¯å¦ç»™åé¦ˆ",
          "ç»ƒä¹ è€…å¯è‡ªè¡Œå†³å®šæ˜¯å¦è·å¾—åé¦ˆ",
          "æŒ‰å›ºå®šé¢‘ç‡ç»™åé¦ˆ",
          "åŠ¨ä½œé”™è¯¯å¿…å®šåé¦ˆ"
        ],
        correct: "B",
        explanation: "ä¸»å¯¼æƒåœ¨ç»ƒä¹ è€…ï¼Œä»–æƒ³è¦æ‰å‘æ•™ç»ƒâ€œè¦ç­”æ¡ˆâ€ã€‚"
      },
      {
        id: "Q23",
        type: "mc",
        text: "è§†è§‰ä¸»å¯¼ç°è±¡æ˜¯æŒ‡ï¼š",
        options: [
          "è§†è§‰ä¸ç¨³å®š",
          "è§†è§‰å–ä»£å…¶ä»–æ„Ÿè§‰",
          "è§†è§‰è¯†åˆ«é¢œè‰²",
          "è§†è§‰å¯¼è‡´åŠ¨ä½œé”™è¯¯"
        ],
        correct: "B",
        explanation: "å½“è§†è§‰å’Œå…¶ä»–æ„Ÿè§‰å†²çªæ—¶ï¼Œå¤§è„‘æ›´ä¿¡çœ¼ç›ã€‚"
      },
      {
        id: "Q24",
        type: "mc",
        text: "è·‘æ­¥è·¨æ é¢„æµ‹èµ·è·¨ä½ç½®ä¸»è¦ä¾èµ–ï¼š",
        options: ["å¤–å‘¨è§†è§‰", "è§¦è§‰", "ä¸­å¤®è§†è§‰", "å¬è§‰"],
        correct: "C",
        explanation: "èµ·è·¨ç‚¹åˆ¤æ–­éœ€è¦æ¸…æ™°çœ‹åˆ°æ æ¶çš„ç©ºé—´ä½ç½®ã€‚"
      },
      {
        id: "Q25",
        type: "mc",
        text: "éšæœºç»ƒä¹ ä¸ç¾¤ç»„ç»ƒä¹ ä¸»è¦å·®åˆ«åœ¨äºï¼š",
        options: ["æ¬¡æ•°", "ç¯å¢ƒ", "åŠ¨ä½œéš¾åº¦", "é¡ºåº"],
        correct: "D",
        explanation: "ä¸¤è€…éƒ½å¤šä»»åŠ¡ç»ƒä¹ ï¼Œæœ€å¤§åŒºåˆ«æ˜¯ä»»åŠ¡å‡ºåœºé¡ºåºã€‚"
      },
      {
        id: "Q26",
        type: "mc",
        text: "ä¸‹åˆ—å±äºç›´è§‰å†³ç­–ç‰¹ç‚¹çš„æ˜¯ï¼š",
        options: [
          "çº¿ç´¢å¤šé€Ÿåº¦æ…¢",
          "çº¿ç´¢å°‘é€Ÿåº¦å¿«æ—¶é—´ç´§è¿«",
          "æ—¶é—´å……è¶³é€Ÿåº¦å¿«",
          "çº¿ç´¢å°‘æ—¶é—´å……è¶³"
        ],
        correct: "B",
        explanation: "å…¸å‹åœºæ™¯å°±æ˜¯æ¯”èµ›ä¸­çš„ç¬é—´é€‰æ‹©ã€‚"
      },
      {
        id: "Q27",
        type: "mc",
        text: "å¸¦å®½åé¦ˆæŒ‡ï¼š",
        options: [
          "æ¯æ¬¡éƒ½åé¦ˆ",
          "è¦æ±‚æ‰åé¦ˆ",
          "è¶…è¿‡è¯¯å·®èŒƒå›´æ‰åé¦ˆ",
          "æ¯åˆ†é’Ÿä¸€æ¬¡åé¦ˆ"
        ],
        correct: "C",
        explanation: "åªæœ‰åå·®è¶…å‡ºâ€œå¸¦å®½â€æ‰æé†’ï¼Œé¿å…ç¢ç¢å¿µã€‚"
      },
      {
        id: "Q28",
        type: "mc",
        text: "ä¸‹åˆ—å±äºè¿ç»­æ€§æŠ€èƒ½çš„æ˜¯ï¼š",
        options: ["ç½‘çƒå‘çƒ", "æŠ•ç¯®", "è·‘æ­¥", "å¼•ä½“å‘ä¸Š"],
        correct: "C",
        explanation: "è·‘æ­¥åŠ¨ä½œå‰åæ²¡æœ‰æ˜æ˜¾åˆ†ç•Œï¼Œæ˜¯è¿ç»­å¾ªç¯ã€‚"
      },
      {
        id: "Q29",
        type: "mc",
        text: "è‡ªç”±åº¦æŒ‡ï¼š",
        options: ["å¿ƒç†èƒ½åŠ›", "è‚Œè‚‰ä¸å…³èŠ‚çš„å¯æ§ç»´åº¦", "åŠ¨ä½œé€Ÿåº¦", "åŠ¨ä½œæ—¶é—´"],
        correct: "B",
        explanation: "éœ€è¦æ§åˆ¶çš„è‚Œè‚‰å’Œå…³èŠ‚ç»´åº¦è¶Šå¤šï¼Œè‡ªç”±åº¦è¶Šé«˜ã€‚"
      },
      {
        id: "Q30",
        type: "mc",
        text: "çŸ­è·‘è¿åŠ¨å‘˜å¬åˆ°æªå£°èµ·è·‘å±äºï¼š",
        options: ["ç®€å•ååº”", "é€‰æ‹©ååº”", "å¤æ‚ååº”", "åå‘ååº”"],
        correct: "A",
        explanation: "å•ä¸€åˆºæ¿€å¯¹åº”å•ä¸€åŠ¨ä½œï¼Œå°±æ˜¯ç®€å•ååº”ã€‚"
      },
      {
        id: "Q31",
        type: "mc",
        text: "ä¸­å¤®è§†è§‰ä¸»è¦åŠŸèƒ½æ˜¯ï¼š",
        options: ["åˆ¤æ–­é€Ÿåº¦", "è¯†åˆ«å½¢çŠ¶é¢œè‰²ç»†èŠ‚", "åˆ¤æ–­å¹³è¡¡", "è·å–æ–¹å‘"],
        correct: "B",
        explanation: "ä¸­å¤®å‡¹è§†é‡åˆ†è¾¨ç‡æœ€é«˜ï¼Œç”¨æ¥è®¤â€œæ˜¯ä»€ä¹ˆâ€ã€‚"
      },
      {
        id: "Q32",
        type: "mc",
        text: "é—­åˆç¯è·¯æ§åˆ¶ç‰¹å¾æ˜¯ï¼š",
        options: ["æ— åé¦ˆ", "æœ‰æ¯”è¾ƒå™¨å¯çº æ­£åŠ¨ä½œ", "å®Œå…¨è‡ªåŠ¨", "éšæœºæ§åˆ¶"],
        correct: "B",
        explanation: "é—­ç¯æœ‰åé¦ˆå’Œæ¯”è¾ƒå™¨ï¼Œèƒ½è¾¹åšè¾¹çº é”™ã€‚"
      },
      {
        id: "Q33",
        type: "mc",
        text: "è¿åŠ¨ä¿¡æ¯å¤„ç†åŒ…æ‹¬ï¼š",
        options: [
          "è¾“å‡ºâ†’è¾“å…¥â†’å†³ç­–",
          "è¾“å…¥â†’å¤„ç†â†’è¾“å‡º",
          "è¾“å…¥â†’è¾“å‡ºâ†’å­¦ä¹ ",
          "è¾“å‡ºâ†’å†³ç­–â†’è¾“å…¥"
        ],
        correct: "B",
        explanation: "æ ‡å‡†ä¸‰æ­¥ï¼šæ„ŸçŸ¥è¾“å…¥ â†’ ä¸­æ¢åŠ å·¥ â†’ è¿åŠ¨è¾“å‡ºã€‚"
      },
      {
        id: "Q34",
        type: "mc",
        text: "é›†ä¸­ç»ƒä¹ é€‚ç”¨äºï¼š",
        options: [
          "æŠ€èƒ½å¤æ‚",
          "å•ä¸€æŠ€èƒ½éœ€å¤§é‡é‡å¤",
          "æŠ€èƒ½ç®€å•æ— éœ€ä½“èƒ½",
          "é•¿æ—¶é—´åŠ¨ä½œ"
        ],
        correct: "B",
        explanation: "å¯¹äºéœ€è¦å¾ˆå¤šæ¬¡é‡å¤çš„å•ä¸€æŠ€èƒ½ï¼Œé›†ä¸­ç»ƒä¹ æ›´é«˜æ•ˆã€‚"
      },
      {
        id: "Q35",
        type: "mc",
        text: "é«˜æ°´å¹³æŠ€èƒ½è¡¨ç°æ˜¯ï¼š",
        options: [
          "åŠ¨ä½œè€—æ—¶é•¿",
          "å‡†ç¡®æ€§é«˜ä¸”èƒ½é‡æ¶ˆè€—ä½",
          "å‡†ç¡®æ€§ä½é€Ÿåº¦å¿«",
          "å¿ƒç†å‹åŠ›é«˜"
        ],
        correct: "B",
        explanation: "åˆå‡†åˆçœåŠ›ï¼Œè¿™æ‰å«çœŸæ­£é«˜æ°´å¹³ã€‚"
      },
      {
        id: "Q36",
        type: "mc",
        text: "çŸ­æ—¶è®°å¿†ç‰¹ç‚¹ï¼š",
        options: ["å®¹é‡å·¨å¤§", "ä¿æŒæé•¿", "å¯æå–æ¼”ç»ƒå¤„ç†ä¿¡æ¯", "ä¸å‚ä¸å­¦ä¹ "],
        correct: "C",
        explanation: "å·¥ä½œè®°å¿†è´Ÿè´£æš‚å­˜å¹¶æ“ä½œå½“å‰æ­£åœ¨ç”¨çš„ä¿¡æ¯ã€‚"
      },
      {
        id: "Q37",
        type: "mc",
        text: "è¿ç»­æ€§è¿åŠ¨æŠ€èƒ½ç‰¹å¾ï¼š",
        options: [
          "æ˜æ˜¾å¼€å§‹ä¸ç»“æŸ",
          "åŠ¨ä½œç‹¬ç«‹",
          "å‰ååŠ¨ä½œæ— ç•Œé™è¿ç»­",
          "æ— åé¦ˆ"
        ],
        correct: "C",
        explanation: "åŠ¨ä½œä¸€ä¸ªæ¥ä¸€ä¸ªè¿ç€ï¼Œæ²¡æœ‰æ¸…æ™°åˆ†æ®µã€‚"
      },
      {
        id: "Q38",
        type: "mc",
        text: "è§‚å¯Ÿç¤ºèŒƒå¯è·å¾—ï¼š",
        options: [
          "å˜åŒ–ç»ƒä¹ ",
          "åŠ¨ä½œæ—¶é—´ã€ç©ºé—´å’Œåè°ƒä¿¡æ¯",
          "èƒ½é‡æ¶ˆè€—",
          "é™ä½è‡ªç”±åº¦"
        ],
        correct: "B",
        explanation: "ç¤ºèŒƒè®©ä½ çœ‹åˆ°â€œèŠ‚å¥ã€è·¯çº¿å’Œé…åˆâ€ã€‚"
      },
      {
        id: "Q39",
        type: "mc",
        text: "è®¤çŸ¥é˜¶æ®µç‰¹ç‚¹ï¼š",
        options: [
          "è‡ªåŠ¨åŒ–",
          "é”™è¯¯å°‘",
          "ä¾èµ–è¯­è¨€æ€è€ƒç†è§£åŠ¨ä½œ",
          "ä¾èµ–å†…éƒ¨åé¦ˆ"
        ],
        correct: "C",
        explanation: "ä¸€å¼€å§‹ä¸»è¦é å¬å’Œæƒ³ï¼Œè„‘å­éå¸¸å¿™ã€‚"
      },
      {
        id: "Q40",
        type: "mc",
        text: "å¤–å‘¨è§†è§‰ä¸»è¦ç”¨äºï¼š",
        options: [
          "åˆ†è¾¨ç»†èŠ‚",
          "è¯†åˆ«é¢œè‰²",
          "åˆ¤æ–­ç‰©ä½“è¿åŠ¨ä¸ä½ç½®",
          "åˆ¤æ–­å›¾æ¡ˆ"
        ],
        correct: "C",
        explanation: "å¤–å‘¨è§†è§‰å¸®ä½ æ„ŸçŸ¥å‘¨è¾¹ç‰©ä½“â€œåœ¨å“ªã€æ€ä¹ˆåŠ¨â€ã€‚"
      }
    ];

    // ç»™åˆ¤æ–­é¢˜è¡¥ options
    questions.forEach(q => {
      if (q.type === "tf" && !q.options) {
        q.options = ["å¯¹", "é”™"];
      }
    });

    const VALID_IDS = ["22011001", "22011014"];

    // DOM
    const loginScreen = document.getElementById("login-screen");
    const quizScreen = document.getElementById("quiz-screen");
    const resultScreen = document.getElementById("result-screen");
    const reviewScreen = document.getElementById("review-screen");

    const idInput = document.getElementById("student-id");
    const loginError = document.getElementById("login-error");
    const loginBtn = document.getElementById("login-btn");

    const progressText = document.getElementById("progress-text");
    const currentTimeEl = document.getElementById("current-time");
    const userIdChip = document.getElementById("user-id-chip");
    const questionCard = document.getElementById("question-card");
    const nextBtn = document.getElementById("next-btn");

    const totalCountEl = document.getElementById("total-count");
    const tfCountEl = document.getElementById("tf-count");
    const mcCountEl = document.getElementById("mc-count");

    const scorePill = document.getElementById("score-pill");
    const commentPill = document.getElementById("comment-pill");
    const resultIdEl = document.getElementById("result-id");
    const totalTimeEl = document.getElementById("total-time");
    const timeListEl = document.getElementById("time-list");

    const reviewListEl = document.getElementById("review-list");

    const reviewBtn = document.getElementById("review-btn");
    const exportBtn = document.getElementById("export-btn");
    const restartBtn = document.getElementById("restart-btn");
    const backToResultBtn = document.getElementById("back-to-result");
    const backToStartBtn = document.getElementById("back-to-start");

    let quizState = {
      studentId: "",
      currentIndex: 0,
      answers: [],
      correctFlags: [],
      times: [],
      questionStartTime: 0,
      quizStartTime: 0,
      timerInterval: null,
      locked: [] // true once answeredï¼Œé˜²æ­¢åæ‚”
    };

    function initCounts() {
      const tfNum = questions.filter(q => q.type === "tf").length;
      const mcNum = questions.filter(q => q.type === "mc").length;
      totalCountEl.textContent = questions.length;
      tfCountEl.textContent = tfNum;
      mcCountEl.textContent = mcNum;
    }

    function showScreen(screen) {
      [loginScreen, quizScreen, resultScreen, reviewScreen].forEach(s => {
        s.classList.add("hidden");
      });
      screen.classList.remove("hidden");
      screen.classList.add("fade-in");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // ç™»å½•
    loginBtn.addEventListener("click", () => {
      const id = idInput.value.trim();
      if (!VALID_IDS.includes(id)) {
        loginError.textContent = "å­¦å·ä¸åœ¨æœ¬æ¬¡æµ‹è¯•åå•ä¸­ï¼Œè¯·æ£€æŸ¥åå†è¯•ã€‚";
        return;
      }
      loginError.textContent = "";
      quizState.studentId = id;
      startQuiz();
    });

    idInput.addEventListener("keydown", e => {
      if (e.key === "Enter") loginBtn.click();
    });

    function startQuiz() {
      quizState.currentIndex = 0;
      quizState.answers = Array(questions.length).fill(null);
      quizState.correctFlags = Array(questions.length).fill(false);
      quizState.times = Array(questions.length).fill(0);
      quizState.locked = Array(questions.length).fill(false);
      quizState.quizStartTime = performance.now();
      userIdChip.textContent = `å½“å‰å­¦å·ï¼š${quizState.studentId}`;

      showScreen(quizScreen);
      renderQuestion();
    }

    function startQuestionTimer() {
      if (quizState.timerInterval) {
        clearInterval(quizState.timerInterval);
      }
      quizState.questionStartTime = performance.now();
      currentTimeEl.textContent = "0.0s";
      quizState.timerInterval = setInterval(() => {
        const elapsed =
          (performance.now() - quizState.questionStartTime) / 1000;
        currentTimeEl.textContent = elapsed.toFixed(1) + "s";
      }, 100);
    }

    function renderQuestion() {
      const idx = quizState.currentIndex;
      const q = questions[idx];
      progressText.textContent = `ç¬¬ ${idx + 1} / ${questions.length} é¢˜`;
      nextBtn.disabled = true;
      nextBtn.textContent =
        idx === questions.length - 1 ? "æŸ¥çœ‹æˆç»©" : "ä¸‹ä¸€é¢˜";

      // æ¸…ç©ºå¹¶é‡æ–°æ¸²æŸ“
      questionCard.className = "question-card";
      questionCard.innerHTML = "";

      const header = document.createElement("div");
      header.className = "question-header";

      const index = document.createElement("div");
      index.className = "question-index";
      index.textContent = q.type === "tf" ? "åˆ¤æ–­é¢˜" : "å•é¡¹é€‰æ‹©";

      const typeTag = document.createElement("div");
      typeTag.className =
        "question-type " + (q.type === "tf" ? "type-tf" : "type-mc");
      typeTag.textContent = q.type === "tf" ? "T / F" : "MCQ";

      header.appendChild(index);
      header.appendChild(typeTag);

      const text = document.createElement("div");
      text.className = "question-text";
      text.textContent = q.text;

      const optionsDiv = document.createElement("div");
      optionsDiv.className = "options";

      q.options.forEach((optText, i) => {
        const label = document.createElement("label");
        label.className = "option";

        const input = document.createElement("input");
        input.type = "radio";
        input.name = q.id;
        const letter = String.fromCharCode(65 + i);
        input.value = letter;

        const span = document.createElement("span");
        span.textContent = `${letter}. ${optText}`;

        label.appendChild(input);
        label.appendChild(span);
        optionsDiv.appendChild(label);
      });

      const fb = document.createElement("div");
      fb.className = "mini-feedback";
      fb.dataset.role = "mini-feedback";

      questionCard.appendChild(header);
      questionCard.appendChild(text);
      questionCard.appendChild(optionsDiv);
      questionCard.appendChild(fb);

      // å°åŠ¨ç”»
      questionCard.classList.remove("slide-out");
      void questionCard.offsetWidth;
      questionCard.classList.add("slide-in");

      attachQuestionHandlers(q, fb);
      startQuestionTimer();
    }

    function attachQuestionHandlers(q, fb) {
      const radios = questionCard.querySelectorAll("input[type=radio]");
      let answered = false;

      radios.forEach(radio => {
        radio.addEventListener("change", () => {
          const idx = quizState.currentIndex;
          if (answered || quizState.locked[idx]) return; // é˜²åæ‚”

          answered = true;
          quizState.locked[idx] = true;

          const selected = radio.value;
          quizState.answers[idx] = selected;

          const elapsed =
            (performance.now() - quizState.questionStartTime) / 1000;
          quizState.times[idx] = elapsed;
          clearInterval(quizState.timerInterval);
          currentTimeEl.textContent = elapsed.toFixed(1) + "s";

          const allRadios = questionCard.querySelectorAll("input[type=radio]");
          allRadios.forEach(r => (r.disabled = true)); // é”å®šç­”æ¡ˆ

          questionCard.classList.remove("correct", "incorrect");
          if (selected === q.correct) {
            quizState.correctFlags[idx] = true;
            questionCard.classList.add("correct");
            fb.classList.add("correct");
            fb.classList.remove("incorrect");
            fb.textContent =
              "âœ… æ­£ç¡®ã€‚" + (q.explanation || "æœ¬é¢˜è€ƒæŸ¥å…³é”®æ¦‚å¿µå·²æŒæ¡ã€‚");
          } else {
            quizState.correctFlags[idx] = false;
            questionCard.classList.add("incorrect");
            fb.classList.add("incorrect");
            fb.classList.remove("correct");
            fb.textContent =
              "âŒ ä¸å¯¹ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ " +
              q.correct +
              "ã€‚ " +
              (q.explanation || "");
          }

          nextBtn.disabled = false;
        });
      });
    }

    nextBtn.addEventListener("click", () => {
      const idx = quizState.currentIndex;
      if (idx < questions.length - 1) {
        // åˆ‡æ¢åˆ°ä¸‹ä¸€é¢˜
        questionCard.classList.remove("slide-in");
        questionCard.classList.add("slide-out");
        setTimeout(() => {
          quizState.currentIndex++;
          renderQuestion();
        }, 200);
      } else {
        // æœ€åä¸€é¢˜ -> æˆç»©é¡µé¢
        clearInterval(quizState.timerInterval);
        showResult();
      }
    });

    function showResult() {
      // æˆç»©è®¡ç®—
      const total = questions.length;
      let correctCount = 0;
      quizState.correctFlags.forEach(f => {
        if (f) correctCount++;
      });
      const score = Math.round((correctCount / total) * 100);
      const totalTimeMs =
        performance.now() - quizState.quizStartTime;
      const totalSeconds = totalTimeMs / 1000;

      scorePill.textContent = `å¾—åˆ†ï¼š${correctCount} / ${total}ï¼ˆ${score} åˆ†ï¼‰`;
      let comment = "";
      if (score >= 90) {
        comment = "å¤©æ‰åªæ˜¯è§æˆ‘çš„é—¨æ§›ã€‚";
      } else if (score >= 80) {
        comment = "è¿˜è¡Œå§ï¼Œåˆšå¥½æ²¡æŒ‚ç§‘ã€‚";
      } else if (score >= 70) {
        comment = "ä½ ä¹Ÿå°±é‚£æ ·å§ã€‚";
      } else if (score >= 60) {
        comment = "è¿™ç‚¹åˆ†ä½ è¿˜æ´»ä¸ï¼Ÿ";
      } else {
        comment = "ä»Šæ™šåˆ«ç¡äº†ï¼Œä¹Ÿåˆ«èµ·é£ï¼Œå¥½å¥½å¤ä¹ ã€‚";
      }
      commentPill.textContent = comment;

      resultIdEl.textContent = quizState.studentId;
      totalTimeEl.textContent = totalSeconds.toFixed(1) + " ç§’";

      // æ¯é¢˜ç”¨æ—¶åˆ—è¡¨
      timeListEl.innerHTML = "";
      quizState.times.forEach((t, i) => {
        const div = document.createElement("div");
        div.className = "time-list-item";
        div.textContent = `ç¬¬ ${i + 1} é¢˜ï¼š${t.toFixed(1)} ç§’`;
        timeListEl.appendChild(div);
      });

      showScreen(resultScreen);
    }

    // é”™é¢˜é€Ÿè§ˆ
    reviewBtn.addEventListener("click", () => {
      reviewListEl.innerHTML = "";
      questions.forEach((q, i) => {
        if (quizState.correctFlags[i]) return;
        const userAns = quizState.answers[i] || "æœªä½œç­”";
        const card = document.createElement("div");
        card.className = "review-card";
        card.innerHTML = `
          <div><strong>ç¬¬ ${i + 1} é¢˜ï¼š</strong>${q.text}</div>
          <div style="margin-top:3px;">ä½ çš„ç­”æ¡ˆï¼š${userAns}ï¼›æ­£ç¡®ç­”æ¡ˆï¼š${q.correct}</div>
          <div style="margin-top:3px;">è§£æï¼š${q.explanation || "æœ¬é¢˜è€ƒæŸ¥å…³é”®æ¦‚å¿µï¼Œè¯·å›é¡¾è¯¾å ‚ç¬”è®°ã€‚"
          }</div>
        `;
        reviewListEl.appendChild(card);
      });
      if (!reviewListEl.children.length) {
        reviewListEl.innerHTML =
          '<div class="review-card">ğŸ‰ æœ¬æ¬¡æ²¡æœ‰é”™é¢˜ï¼Œå¯ä»¥æ”¾å¿ƒèµ·é£ï¼ˆä½†åˆ«å¤ªé£˜ï¼‰ã€‚</div>';
      }
      showScreen(reviewScreen);
    });

    backToResultBtn.addEventListener("click", () => {
      showScreen(resultScreen);
    });

    backToStartBtn.addEventListener("click", () => {
      showScreen(loginScreen);
    });

    restartBtn.addEventListener("click", () => {
      startQuiz();
    });

    // å¯¼å‡ºæˆç»©å•ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰
    exportBtn.addEventListener("click", () => {
      const total = questions.length;
      let correctCount = 0;
      quizState.correctFlags.forEach(f => {
        if (f) correctCount++;
      });
      const score = Math.round((correctCount / total) * 100);
      let comment = commentPill.textContent || "";

      const totalTimeMs =
        performance.now() - quizState.quizStartTime;
      const totalSeconds = totalTimeMs / 1000;

      let lines = [];
      lines.push("Juncheng Wu Â· Motor Learning Lab æˆç»©å•");
      lines.push("---------------------------------------");
      lines.push("å­¦å·: " + quizState.studentId);
      lines.push("æ€»å¾—åˆ†: " + score + " åˆ†");
      lines.push("è¯„è¯­: " + comment);
      lines.push("æ€»ç”¨æ—¶: " + totalSeconds.toFixed(1) + " ç§’");
      lines.push("");
      lines.push("é€é¢˜æƒ…å†µï¼š");
      questions.forEach((q, i) => {
        const userAns = quizState.answers[i] || "æœªä½œç­”";
        const flag = quizState.correctFlags[i] ? "âœ”" : "âœ˜";
        const t = quizState.times[i].toFixed(1);
        lines.push(
          `ç¬¬ ${i + 1} é¢˜ [${flag}] ç”¨æ—¶ ${t} ç§’ | ä½ çš„ç­”æ¡ˆï¼š${userAns} | æ­£ç¡®ç­”æ¡ˆï¼š${q.correct} | é¢˜å¹²ï¼š${q.text}`
        );
      });

      const blob = new Blob([lines.join("\n")], {
        type: "text/plain;charset=utf-8"
      });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "motor_learning_result.txt";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    // åˆå§‹åŒ–
    (function init() {
      initCounts();
    })();
  </script>
</body>
</html>